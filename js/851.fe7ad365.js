"use strict";(self["webpackChunkcool_news"]=self["webpackChunkcool_news"]||[]).push([[851],{6454:function(t,s,e){e.d(s,{Z:function(){return v}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"text-center"},[e("v-dialog",{attrs:{width:"500"},model:{value:t.visibility,callback:function(s){t.visibility=s},expression:"visibility"}},[e("v-card",{staticClass:"card"},[e("v-row",{staticClass:"px-5 mt-1",attrs:{align:"center"}},[t.isEdit?e("v-card-title",[t._v("Update post")]):e("v-card-title",[t._v("Adding new post")]),e("v-spacer"),e("v-icon",{staticClass:"mr-2",on:{click:function(s){return t.$emit("close")}}},[t._v("mdi-close")])],1),e("v-col",{staticClass:"px-8",attrs:{cols:"12",lg:"12",md:"12",xl:"12",sm:"12"}},[e("v-text-field",{attrs:{placeholder:"Type here...",label:"Post title",outlined:"",dense:"",color:"green","error-messages":t.postTitleError},on:{blur:function(s){return t.$v.posts.title.$touch()}},model:{value:t.posts.title,callback:function(s){t.$set(t.posts,"title",s)},expression:"posts.title"}}),e("v-textarea",{attrs:{placeholder:"Type here...",label:"Post text",outlined:"",dense:"",color:"green","error-messages":t.postTextError},on:{blur:function(s){return t.$v.posts.text.$touch()}},model:{value:t.posts.text,callback:function(s){t.$set(t.posts,"text",s)},expression:"posts.text"}})],1),e("v-card-actions",[e("v-row",{staticClass:"mr-2 mb-5",attrs:{justify:"end"}},[t.isEdit?e("v-row",{attrs:{justify:"end"}},[e("v-btn",{staticClass:"mr-5",attrs:{color:"red",dark:""},on:{click:function(s){return t.deletePost(t.posts._id)}}},[t._v(" Delete ")]),e("v-btn",{attrs:{color:"green",dark:""},on:{click:function(s){t.updatePost(t.posts._id),t.$emit("getPosts")}}},[t._v(" Update ")])],1):e("v-btn",{attrs:{color:"green",dark:""},on:{click:t.createNewPost}},[t._v(" Create ")])],1)],1)],1)],1)],1)},o=[],a=e(8620),r=e(379),l=e(7868),n=e(629),c={mixins:[a.oE],data:()=>({posts:[]}),validations:{posts:{title:{required:r.C1},text:{required:r.C1,minLength:(0,r.Ei)(50)}}},props:{visible:{require:!0},post:{require:!1},isEdit:{require:!1}},methods:{async createNewPost(){if(this.$v.$touch(),!this.$v.$invalid){const t=[];t.title=this.posts.title,t.text=this.posts.text,t.author_id=this.loggedUser.userId,t.author_username=this.loggedUser.username,await l.Z.createPost({...t}),this.posts={},this.$v.$reset(),this.$emit("createPost")}},async updatePost(t){if(this.$v.$touch(),!this.$v.$invalid){const s=[];s.title=this.posts.title,s.text=this.posts.text,s.author_id=this.loggedUser.userId,s.author_username=this.loggedUser.username,await l.Z.updatePost(t,{...s}),this.$emit("getPosts")}},async deletePost(t){await l.Z.deletePost(t),this.$emit("getPosts")}},watch:{post:{deep:!0,handler(){this.isEdit&&(this.posts=this.post)}}},computed:{...(0,n.Se)(["loggedUser"]),visibility:{get(){return this.visible},set(){this.$emit("close")}},postTitleError(){const t=[];return this.$v.posts.title.$dirty?(!this.$v.posts.title.required&&t.push("Title is required"),t):t},postTextError(){const t=[];return this.$v.posts.text.$dirty?(!this.$v.posts.text.required&&t.push("Text is required"),!this.$v.posts.text.minLength&&t.push("Tou text must contain min 50 symbols"),t):t}}},d=c,u=e(1001),p=(0,u.Z)(d,i,o,!1,null,null,null),v=p.exports},4393:function(t,s,e){e.d(s,{Z:function(){return f}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.showLoader?e("div",{staticClass:"d-flex align-center"},[t.showLoader?e("v-progress-circular",{staticClass:"mx-auto",attrs:{indeterminate:"",color:"green"}}):t._e()],1):0==t.posts.length?e("div",{staticClass:"d-flex align-center"},["main"==t.type?e("span",{staticClass:"mx-auto"},[t._v("There are no posts yet")]):t._e(),"profile"==t.type?e("span",{staticClass:"mx-auto"},[t._v("You don't have any posts yet")]):t._e()]):e("v-row",{staticStyle:{justify:"space-between"}},[t._l(t.posts,(function(s){return e("v-col",{key:s._id,attrs:{cols:"6",lg:"3"}},[e("v-card",{attrs:{evalution:"10"},on:{click:function(e){return t.getDetailPost(s._id)}}},[e("v-card-title",{staticClass:"title"},[t._v(t._s(s.title))]),e("v-card-text",[e("span",{staticClass:"text"},[t._v(t._s(s.text))])]),e("v-card-subtitle",{staticClass:"px-5"},[e("v-row",{attrs:{justify:"end"}},[e("span",[t._v(" "+t._s(s.date_of_create)+" ")])]),e("v-row",{attrs:{justify:"start"}},[e("span",[t._v(" Author: "+t._s(s.author_username)+" ")])])],1)],1)],1)})),e("post-detail-modal",{attrs:{post:t.postDetail,visible:t.visibleMainModal},on:{close:function(s){t.visibleMainModal=!t.visibleMainModal}}}),e("add-new-post-modal",{attrs:{isEdit:"true",post:t.postDetail,visible:t.visibleProfileModal},on:{close:function(s){t.visibleProfileModal=!t.visibleProfileModal},getPosts:function(s){t.$emit("getPosts",t.visibleProfileModal=!1)}}})],2)],1)},o=[],a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"text-center"},[e("v-dialog",{attrs:{width:"500"},model:{value:t.visibility,callback:function(s){t.visibility=s},expression:"visibility"}},[e("v-card",{staticClass:"card"},[e("v-row",{staticClass:"px-5"},[e("v-card-title",[t._v(t._s(t.post.title))]),e("v-spacer"),e("v-icon",{on:{click:function(s){return t.$emit("close")}}},[t._v("mdi-close")])],1),e("v-col",[e("v-img",{attrs:{height:"150",src:"https://cdn.vuetifyjs.com/images/cards/cooking.png"}}),e("v-card-text",[t._v(" "+t._s(t.post.text))])],1),e("v-card-subtitle",{staticClass:"px-5"},[e("v-row",{attrs:{justify:"end"}},[e("span",[t._v(" "+t._s(t.post.date_of_create)+" ")])]),e("v-row",{attrs:{justify:"start"}},[e("span",[t._v(" Author: "+t._s(t.post.author_username)+" ")])])],1)],1)],1)],1)},r=[],l={props:{visible:{require:!0},post:{require:!0}},computed:{visibility:{get(){return this.visible},set(){this.$emit("close")}}}},n=l,c=e(1001),d=(0,c.Z)(n,a,r,!1,null,null,null),u=d.exports,p=e(6454),v=e(7868),h={components:{postDetailModal:u,addNewPostModal:p.Z},data:()=>({visibleMainModal:!1,visibleProfileModal:!1,postDetail:{}}),props:{posts:{require:!0},type:{require:!0},showLoader:{require:!0}},methods:{async getDetailPost(t){const s=await v.Z.getPostById(t);this.postDetail=s.result,console.log(this.postDetail),"main"===this.type&&(this.visibleMainModal=!0),"profile"===this.type&&(this.visibleProfileModal=!0)}}},m=h,g=(0,c.Z)(m,i,o,!1,null,null,null),f=g.exports},4851:function(t,s,e){e.r(s),e.d(s,{default:function(){return f}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("main-component")],1)},o=[],a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("v-card-title",[t._v("Recent news")]),e("posts-list",{attrs:{"show-loader":t.showLoader,type:"main",posts:t.posts}}),0!==t.posts.length?e("v-pagination",{staticClass:"mt-5",attrs:{length:t.pageCount,circle:"",color:"green"},model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e()],1)},r=[],l=e(4393),n=e(7868),c={components:{postsList:l.Z},data:()=>({page:1,pageCount:0,posts:[],showLoader:!0}),mounted(){this.getAllPosts()},methods:{async getAllPosts(){const t=await n.Z.getAllPosts(this.page);console.log(t),this.posts=t.result,this.pageCount=parseInt(t.total_items/10)+1,this.showLoader=!1}},watch:{page:{deep:!0,handler(){this.showLoader=!0,this.getAllPosts()}}}},d=c,u=e(1001),p=(0,u.Z)(d,a,r,!1,null,null,null),v=p.exports,h={name:"main-view",components:{mainComponent:v}},m=h,g=(0,u.Z)(m,i,o,!1,null,null,null),f=g.exports},7868:function(t,s,e){var i=e(4639);s["Z"]={async createPost(t){const s=await i.Z.post("/posts/",t);return s?.data},async updatePost(t,s){const e=await i.Z.post(`/posts/${t}`,s);return e?.data},async getAllPosts(t){const s=await i.Z.get(`/posts/${t}`);return s?.data},async getPostsByAuthor(t,s){const e=await i.Z.get(`/posts/${t}/posts/${s}`);return e?.data},async getPostById(t){const s=await i.Z.get(`/posts/post/${t}`);return s?.data},async deletePost(t){const s=await i.Z["delete"](`/posts/${t}`);return s?.data}}}}]);
//# sourceMappingURL=851.fe7ad365.js.map