"use strict";(self["webpackChunkcool_news"]=self["webpackChunkcool_news"]||[]).push([[182],{6454:function(s,e,t){t.d(e,{Z:function(){return v}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"text-center"},[t("v-dialog",{attrs:{width:"500"},model:{value:s.visibility,callback:function(e){s.visibility=e},expression:"visibility"}},[t("v-card",{staticClass:"card"},[t("v-row",{staticClass:"px-5 mt-1",attrs:{align:"center"}},[s.isEdit?t("v-card-title",[s._v("Update post")]):t("v-card-title",[s._v("Adding new post")]),t("v-spacer"),t("v-icon",{staticClass:"mr-2",on:{click:function(e){return s.$emit("close")}}},[s._v("mdi-close")])],1),t("v-col",{staticClass:"px-8",attrs:{cols:"12",lg:"12",md:"12",xl:"12",sm:"12"}},[t("v-text-field",{attrs:{placeholder:"Type here...",label:"Post title",outlined:"",dense:"",color:"green","error-messages":s.postTitleError},on:{blur:function(e){return s.$v.posts.title.$touch()}},model:{value:s.posts.title,callback:function(e){s.$set(s.posts,"title",e)},expression:"posts.title"}}),t("v-textarea",{attrs:{placeholder:"Type here...",label:"Post text",outlined:"",dense:"",color:"green","error-messages":s.postTextError},on:{blur:function(e){return s.$v.posts.text.$touch()}},model:{value:s.posts.text,callback:function(e){s.$set(s.posts,"text",e)},expression:"posts.text"}})],1),t("v-card-actions",[t("v-row",{staticClass:"mr-2 mb-5",attrs:{justify:"end"}},[s.isEdit?t("v-row",{attrs:{justify:"end"}},[t("v-btn",{staticClass:"mr-5",attrs:{color:"red",dark:""},on:{click:function(e){return s.deletePost(s.posts._id)}}},[s._v(" Delete ")]),t("v-btn",{attrs:{color:"green",dark:""},on:{click:function(e){s.updatePost(s.posts._id),s.$emit("getPosts")}}},[s._v(" Update ")])],1):t("v-btn",{attrs:{color:"green",dark:""},on:{click:s.createNewPost}},[s._v(" Create ")])],1)],1)],1)],1)],1)},o=[],a=t(8620),i=t(379),n=t(7868),l=t(629),c={mixins:[a.oE],data:()=>({posts:[]}),validations:{posts:{title:{required:i.C1},text:{required:i.C1,minLength:(0,i.Ei)(50)}}},props:{visible:{require:!0},post:{require:!1},isEdit:{require:!1}},methods:{async createNewPost(){if(this.$v.$touch(),!this.$v.$invalid){const s=[];s.title=this.posts.title,s.text=this.posts.text,s.author_id=this.loggedUser.userId,s.author_username=this.loggedUser.username,await n.Z.createPost({...s}),this.posts={},this.$v.$reset(),this.$emit("createPost")}},async updatePost(s){if(this.$v.$touch(),!this.$v.$invalid){const e=[];e.title=this.posts.title,e.text=this.posts.text,e.author_id=this.loggedUser.userId,e.author_username=this.loggedUser.username,await n.Z.updatePost(s,{...e}),this.$emit("getPosts")}},async deletePost(s){await n.Z.deletePost(s),this.$emit("getPosts")}},watch:{post:{deep:!0,handler(){this.isEdit&&(this.posts=this.post)}}},computed:{...(0,l.Se)(["loggedUser"]),visibility:{get(){return this.visible},set(){this.$emit("close")}},postTitleError(){const s=[];return this.$v.posts.title.$dirty?(!this.$v.posts.title.required&&s.push("Title is required"),s):s},postTextError(){const s=[];return this.$v.posts.text.$dirty?(!this.$v.posts.text.required&&s.push("Text is required"),!this.$v.posts.text.minLength&&s.push("Tou text must contain min 50 symbols"),s):s}}},d=c,u=t(1001),p=(0,u.Z)(d,r,o,!1,null,null,null),v=p.exports},6773:function(s,e,t){t.d(e,{Z:function(){return u}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return s.password&&!this.$v.password.valid?t("v-col",{staticClass:"mb-5"},[t("span",[s._v("The password must contain")]),t("br"),t("span",[this.$v.password.minLength?s._e():t("v-icon",{attrs:{"x-small":"",color:"error"}},[s._v("mdi-close-circle")]),this.$v.password.minLength?t("v-icon",{attrs:{"x-small":"",color:"success"}},[s._v("mdi-check-circle")]):s._e(),s._v(" Be at least 8 characters long ")],1),t("br"),t("span",[this.$v.password.validUppercase?s._e():t("v-icon",{attrs:{"x-small":"",color:"error"}},[s._v("mdi-close-circle")]),this.$v.password.validUppercase?t("v-icon",{attrs:{"x-small":"",color:"success"}},[s._v("mdi-check-circle")]):s._e(),s._v(" Have at least 1 uppercase")],1),t("br"),t("span",[this.$v.password.validLowercase?s._e():t("v-icon",{attrs:{"x-small":"",color:"error"}},[s._v("mdi-close-circle")]),this.$v.password.validLowercase?t("v-icon",{attrs:{"x-small":"",color:"success"}},[s._v("mdi-check-circle")]):s._e(),s._v(" Have at least 1 lowercase")],1),t("br"),t("span",[this.$v.password.validNumber?s._e():t("v-icon",{attrs:{"x-small":"",color:"error"}},[s._v("mdi-close-circle")]),this.$v.password.validNumber?t("v-icon",{attrs:{"x-small":"",color:"success"}},[s._v("mdi-check-circle")]):s._e(),s._v(" Have at least 1 number")],1),t("br"),t("span",[this.$v.password.validSpecial?s._e():t("v-icon",{attrs:{"x-small":"",color:"error"}},[s._v("mdi-close-circle")]),this.$v.password.validSpecial?t("v-icon",{attrs:{"x-small":"",color:"success"}},[s._v("mdi-check-circle")]):s._e(),s._v(" Have at least 1 special character (@, $, !)")],1),t("br")]):s._e()},o=[],a=t(8620),i=t(379),n={mixins:[a.oE],props:{password:{require:!1}},validations:{password:{required:i.C1,minLength:(0,i.Ei)(8),validUppercase:function(s){const e=/[A-Z]/.test(s);return e},validLowercase:function(s){const e=/[a-z]/.test(s);return e},validNumber:function(s){const e=/[0-9]/.test(s);return e},validSpecial:function(s){const e=/[#?!@$%^&*-]/.test(s);return e},valid:function(s){const e=/[A-Z]/.test(s),t=/[a-z]/.test(s),r=/[0-9]/.test(s),o=/[#?!@$%^&*-]/.test(s);return e&&t&&r&&o&&(0,i.Ei)(8)}}}},l=n,c=t(1001),d=(0,c.Z)(l,r,o,!1,null,null,null),u=d.exports},4393:function(s,e,t){t.d(e,{Z:function(){return f}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[s.showLoader?t("div",{staticClass:"d-flex align-center"},[s.showLoader?t("v-progress-circular",{staticClass:"mx-auto",attrs:{indeterminate:"",color:"green"}}):s._e()],1):0==s.posts.length?t("div",{staticClass:"d-flex align-center"},["main"==s.type?t("span",{staticClass:"mx-auto"},[s._v("There are no posts yet")]):s._e(),"profile"==s.type?t("span",{staticClass:"mx-auto"},[s._v("You don't have any posts yet")]):s._e()]):t("v-row",{staticStyle:{justify:"space-between"}},[s._l(s.posts,(function(e){return t("v-col",{key:e._id,attrs:{cols:"6",lg:"3"}},[t("v-card",{attrs:{evalution:"10"},on:{click:function(t){return s.getDetailPost(e._id)}}},[t("v-card-title",{staticClass:"title"},[s._v(s._s(e.title))]),t("v-card-text",[t("span",{staticClass:"text"},[s._v(s._s(e.text))])]),t("v-card-subtitle",{staticClass:"px-5"},[t("v-row",{attrs:{justify:"end"}},[t("span",[s._v(" "+s._s(e.date_of_create)+" ")])]),t("v-row",{attrs:{justify:"start"}},[t("span",[s._v(" Author: "+s._s(e.author_username)+" ")])])],1)],1)],1)})),t("post-detail-modal",{attrs:{post:s.postDetail,visible:s.visibleMainModal},on:{close:function(e){s.visibleMainModal=!s.visibleMainModal}}}),t("add-new-post-modal",{attrs:{isEdit:"true",post:s.postDetail,visible:s.visibleProfileModal},on:{close:function(e){s.visibleProfileModal=!s.visibleProfileModal},getPosts:function(e){s.$emit("getPosts",s.visibleProfileModal=!1)}}})],2)],1)},o=[],a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"text-center"},[t("v-dialog",{attrs:{width:"500"},model:{value:s.visibility,callback:function(e){s.visibility=e},expression:"visibility"}},[t("v-card",{staticClass:"card"},[t("v-row",{staticClass:"px-5"},[t("v-card-title",[s._v(s._s(s.post.title))]),t("v-spacer"),t("v-icon",{on:{click:function(e){return s.$emit("close")}}},[s._v("mdi-close")])],1),t("v-col",[t("v-img",{attrs:{height:"150",src:"https://cdn.vuetifyjs.com/images/cards/cooking.png"}}),t("v-card-text",[s._v(" "+s._s(s.post.text))])],1),t("v-card-subtitle",{staticClass:"px-5"},[t("v-row",{attrs:{justify:"end"}},[t("span",[s._v(" "+s._s(s.post.date_of_create)+" ")])]),t("v-row",{attrs:{justify:"start"}},[t("span",[s._v(" Author: "+s._s(s.post.author_username)+" ")])])],1)],1)],1)],1)},i=[],n={props:{visible:{require:!0},post:{require:!0}},computed:{visibility:{get(){return this.visible},set(){this.$emit("close")}}}},l=n,c=t(1001),d=(0,c.Z)(l,a,i,!1,null,null,null),u=d.exports,p=t(6454),v=t(7868),m={components:{postDetailModal:u,addNewPostModal:p.Z},data:()=>({visibleMainModal:!1,visibleProfileModal:!1,postDetail:{}}),props:{posts:{require:!0},type:{require:!0},showLoader:{require:!0}},methods:{async getDetailPost(s){const e=await v.Z.getPostById(s);this.postDetail=e.result,console.log(this.postDetail),"main"===this.type&&(this.visibleMainModal=!0),"profile"===this.type&&(this.visibleProfileModal=!0)}}},h=m,w=(0,c.Z)(h,r,o,!1,null,null,null),f=w.exports},4182:function(s,e,t){t.r(e),t.d(e,{default:function(){return A}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("profile-component")],1)},o=[],a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("v-card",[t("v-card-title",{staticClass:"ml-5"},[s._v(s._s(s.loggedUser.username))]),t("v-tabs",{attrs:{"show-arrows":"",centered:"",color:"green"},model:{value:s.tab,callback:function(e){s.tab=e},expression:"tab"}},[t("v-tabs-slider",{attrs:{color:"green"}}),t("v-tab",{attrs:{href:"#info"}},[s._v("Info")]),t("v-tab",{attrs:{href:"#posts"}},[s._v("Posts")]),t("v-tab-item",{staticClass:"mt-7",attrs:{value:"info"}},[t("user-info")],1),t("v-tab-item",{staticClass:"mt-7",attrs:{value:"posts"}},[t("user-posts")],1)],1)],1)},i=[],n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("v-col",[t("v-row",{staticClass:"px-5 mb-5",attrs:{align:"center"}},[t("v-card-title",[s._v("Your posts")]),t("v-spacer"),t("v-btn",{attrs:{outlined:"",color:"green"},on:{click:function(e){s.visible=!0}}},[s._v("Add new post")])],1),t("posts-list",{staticClass:"px-10",attrs:{showLoader:s.showLoader,type:"profile",posts:s.posts},on:{getPosts:function(e){return s.getAutorPosts()}}}),s.posts.length>0?t("v-pagination",{staticClass:"mt-5",attrs:{length:s.pageCount,circle:"",color:"green"},model:{value:s.page,callback:function(e){s.page=e},expression:"page"}}):s._e()],1),t("add-new-post-modal",{attrs:{visible:s.visible},on:{close:function(e){s.visible=!s.visible},createPost:function(e){s.getAutorPosts(),s.visible=!s.visible}}})],1)},l=[],c=t(4393),d=t(6454),u=t(7868),p=t(629),v={components:{postsList:c.Z,AddNewPostModal:d.Z},data:()=>({page:1,pageCount:1,visible:!1,showLoader:!0,posts:[]}),mounted(){this.getAutorPosts()},methods:{async getAutorPosts(){let s=this.loggedUser.userId;const e=await u.Z.getPostsByAuthor(s,this.page);this.posts=e.result,console.log(e),this.pageCount=parseInt(e.total_items/10)+1,console.log(this.pageCount),this.showLoader=!1}},computed:{...(0,p.Se)(["loggedUser"])},watch:{page:{deep:!0,handler(){this.showLoader=!0,this.getAutorPosts()}}}},m=v,h=t(1001),w=(0,h.Z)(m,n,l,!1,null,null,null),f=w.exports,_=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("v-row",{attrs:{justify:"center"}},[t("v-col",{attrs:{"align-self":"center",cols:"6",lg:"6"}},[t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Username","error-messages":s.usernameError},on:{blur:function(e){return s.$v.user.username.$touch()}},model:{value:s.user.username,callback:function(e){s.$set(s.user,"username",e)},expression:"user.username"}}),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"First name","error-messages":s.firstNameError},on:{blur:function(e){return s.$v.user.first_name.$touch()}},model:{value:s.user.first_name,callback:function(e){s.$set(s.user,"first_name",e)},expression:"user.first_name"}}),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Last name","error-messages":s.lastNameError},on:{blur:function(e){return s.$v.user.last_name.$touch()}},model:{value:s.user.last_name,callback:function(e){s.$set(s.user,"last_name",e)},expression:"user.last_name"}}),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Email",autocomplete:"email","error-messages":s.emailError},on:{blur:function(e){return s.$v.user.email.$touch()}},model:{value:s.user.email,callback:function(e){s.$set(s.user,"email",e)},expression:"user.email"}}),t("v-btn",{attrs:{dark:"",color:"green"},on:{click:s.updateUserInfo}},[s._v("Update")]),t("v-card-title",[t("h3",[s._v("Change password")])]),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Current password",type:s.currentPasswordVisible?"text":"password","append-icon":s.currentPasswordVisible?"mdi-eye":"mdi-eye-off","error-messages":s.currentPasswordError},on:{"click:append":function(e){s.currentPasswordVisible=!s.currentPasswordVisible},blur:function(e){return s.$v.password.current_password.$touch()}},model:{value:s.password.current_password,callback:function(e){s.$set(s.password,"current_password",e)},expression:"password.current_password"}}),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"New password",type:s.passwordVisible?"text":"password","append-icon":s.passwordVisible?"mdi-eye":"mdi-eye-off","error-messages":s.passwordError,"hide-details":""!==s.password.password&&s.password.password.length<8},on:{"click:append":function(e){s.passwordVisible=!s.passwordVisible},blur:function(e){return s.$v.password.password.$touch()}},model:{value:s.password.password,callback:function(e){s.$set(s.password,"password",e)},expression:"password.password"}}),t("password-helper",{attrs:{password:s.password.password}}),t("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Confirm password",type:s.confirmPasswordVisible?"text":"password","append-icon":s.confirmPasswordVisible?"mdi-eye":"mdi-eye-off","error-messages":s.confirmPasswordError},on:{"click:append":function(e){s.confirmPasswordVisible=!s.confirmPasswordVisible},blur:function(e){return s.$v.password.confirm_password.$touch()}},model:{value:s.password.confirm_password,callback:function(e){s.$set(s.password,"confirm_password",e)},expression:"password.confirm_password"}}),t("v-btn",{staticClass:"mb-5",attrs:{dark:"",color:"green"},on:{click:s.updateUserPassword}},[s._v("Update")])],1)],1)],1)},g=[],b=t(8620),$=t(379),x=t(6773),y=t(5397),P={components:{passwordHelper:x.Z},mixins:[b.oE],data:()=>({user:{},password:{password:""},currentPasswordVisible:!1,passwordVisible:!1,confirmPasswordVisible:!1}),validations:{user:{email:{required:$.C1,email:$.Do},first_name:{required:$.C1},last_name:{required:$.C1},username:{required:$.C1}},password:{current_password:{required:$.C1},password:{required:$.C1},confirm_password:{required:$.C1,sameAsPassword:(0,$.sH)("password")}}},mounted(){this.getUserInfo()},methods:{...(0,p.nv)(["updateInfo"]),async getUserInfo(){let s=this.loggedUser.userId;const e=await y.Z.getUserById(s);this.user=e.result,this.updateInfo({userId:e.result._id,username:e.result.username})},async updateUserInfo(){if(this.$v.user.$touch(),!this.$v.user.$invalid){let s=this.loggedUser.userId;const e=[];e.username=this.user.username,e.first_name=this.user.first_name,e.last_name=this.user.last_name,e.email=this.user.email,await y.Z.updateUserData(s,{...e}),this.getUserInfo()}},async updateUserPassword(){if(this.$v.password.$touch(),!this.$v.password.$invalid){let s=this.loggedUser.userId;const e=[];e.current_password=this.password.current_password,e.password=this.password.password,await y.Z.changePassword(s,{...e})}}},computed:{...(0,p.Se)(["loggedUser"]),emailError(){const s=[];return this.$v.user.email.$dirty?(!this.$v.user.email.required&&s.push("Email is required"),this.$v.user.email.email||s.push("Email is incorrect"),s):s},firstNameError(){const s=[];return this.$v.user.first_name.$dirty?(this.$v.user.first_name.required||s.push("First name is required"),s):s},lastNameError(){const s=[];return this.$v.user.last_name.$dirty?(this.$v.user.last_name.required||s.push("Last name is required"),s):s},usernameError(){const s=[];return this.$v.user.username.$dirty?(this.$v.user.username.required||s.push("Username is required"),s):s},currentPasswordError(){const s=[];return this.$v.password.current_password.$dirty?(this.$v.password.current_password.required||s.push("Current password is required"),s):s},passwordError(){const s=[];return this.$v.password.password.$dirty?(this.$v.password.password.required||s.push("Password is required"),s):s},confirmPasswordError(){const s=[];return this.$v.password.confirm_password.$dirty?this.$v.password.confirm_password.sameAsPassword||""===this.password.password?(!this.$v.password.confirm_password.required&&s.push("Confirm password is required"),s):(s.push("Password don`t match"),s):s}}},C=P,k=(0,h.Z)(C,_,g,!1,null,null,null),E=k.exports,q={components:{userPosts:f,userInfo:E},data:()=>({tab:""}),computed:{...(0,p.Se)(["loggedUser"])}},Z=q,U=(0,h.Z)(Z,a,i,!1,null,null,null),I=U.exports,L={name:"profile-view",components:{profileComponent:I}},M=L,T=(0,h.Z)(M,r,o,!1,null,null,null),A=T.exports},7868:function(s,e,t){var r=t(4639);e["Z"]={async createPost(s){const e=await r.Z.post("/posts/",s);return e?.data},async updatePost(s,e){const t=await r.Z.post(`/posts/${s}`,e);return t?.data},async getAllPosts(s){const e=await r.Z.get(`/posts/${s}`);return e?.data},async getPostsByAuthor(s,e){const t=await r.Z.get(`/posts/${s}/posts/${e}`);return t?.data},async getPostById(s){const e=await r.Z.get(`/posts/post/${s}`);return e?.data},async deletePost(s){const e=await r.Z["delete"](`/posts/${s}`);return e?.data}}},5397:function(s,e,t){var r=t(4639);e["Z"]={async updateUserData(s,e){const t=await r.Z.post(`/user/update/${s}`,e);return t?.data},async changePassword(s,e){const t=await r.Z.post(`/user/change_password/${s}`,e);return t?.data},async getUserById(s){const e=await r.Z.get(`/user/${s}`);return e?.data}}}}]);
//# sourceMappingURL=182.9fdbcbfc.js.map