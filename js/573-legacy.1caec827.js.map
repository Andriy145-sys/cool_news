{"version":3,"file":"js/573-legacy.1caec827.js","mappings":"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","sources":["webpack://cool_news/./src/views/AuthView/Login.vue?c084","webpack://cool_news/src/views/AuthView/Login.vue","webpack://cool_news/./src/views/AuthView/Login.vue?68c2","webpack://cool_news/./src/views/AuthView/Login.vue","webpack://cool_news/./src/request/requests/authService.js","webpack://cool_news/./src/request/requests/userService.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"justify-center align-center mx-auto col-12 col-sm-7 col-md-4 my-15\"},[_c('v-card',{staticClass:\"mb-5\",attrs:{\"elevation\":\"10\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"align-self\":\"center\",\"cols\":\"10\",\"lg\":\"10\"}},[_c('h3',{staticClass:\"mb-5\"},[_vm._v(\"Login\")]),_c('v-text-field',{attrs:{\"color\":\"green\",\"dense\":\"\",\"outlined\":\"\",\"placeholder\":\"Type here...\",\"label\":\"Email\",\"autocomplete\":\"email\",\"error-messages\":_vm.emailError.length === 0 ? _vm.emailErrorMsg[0] : _vm.emailError},on:{\"blur\":function($event){return _vm.$v.user.email.$touch()},\"input\":function($event){_vm.emailErrorMsg = []}},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}}),_c('v-text-field',{attrs:{\"color\":\"green\",\"dense\":\"\",\"outlined\":\"\",\"placeholder\":\"Type here...\",\"label\":\"New password\",\"type\":_vm.passwordVisible ? 'text' : 'password',\"append-icon\":_vm.passwordVisible ? 'mdi-eye' : 'mdi-eye-off',\"error-messages\":_vm.passwordError.length === 0 ? _vm.passwordErrorMsg : _vm.passwordError},on:{\"click:append\":function($event){_vm.passwordVisible = !_vm.passwordVisible},\"blur\":function($event){return _vm.$v.user.password.$touch()},\"input\":function($event){_vm.passwordErrorMsg = []}},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('v-btn',{staticClass:\"mb-5\",attrs:{\"dark\":\"\",\"color\":\"green\"},on:{\"click\":_vm.login}},[_vm._v(\"Login\")]),_c('br'),_c('span',[_vm._v(\"Are you new?\"),_c('router-link',{attrs:{\"to\":\"/sign_up\"}},[_vm._v(\"Â Sign up\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"justify-center align-center mx-auto col-12 col-sm-7 col-md-4 my-15\"\r\n  >\r\n    <v-card elevation=\"10\" class=\"mb-5\">\r\n      <v-row justify=\"center\">\r\n        <v-col align-self=\"center\" cols=\"10\" lg=\"10\">\r\n          <h3 class=\"mb-5\">Login</h3>\r\n          <v-text-field\r\n            color=\"green\"\r\n            dense\r\n            outlined\r\n            placeholder=\"Type here...\"\r\n            label=\"Email\"\r\n            autocomplete=\"email\"\r\n            v-model=\"user.email\"\r\n            :error-messages=\"emailError.length === 0 ? emailErrorMsg[0] : emailError\"\r\n            @blur=\"$v.user.email.$touch()\"\r\n            @input=\"emailErrorMsg = []\"\r\n          />\r\n          <v-text-field\r\n            color=\"green\"\r\n            dense\r\n            outlined\r\n            placeholder=\"Type here...\"\r\n            label=\"New password\"\r\n            v-model=\"user.password\"\r\n            :type=\"passwordVisible ? 'text' : 'password'\"\r\n            :append-icon=\"passwordVisible ? 'mdi-eye' : 'mdi-eye-off'\"\r\n            @click:append=\"passwordVisible = !passwordVisible\"\r\n            :error-messages=\"passwordError.length === 0 ? passwordErrorMsg : passwordError\"\r\n            @blur=\"$v.user.password.$touch()\"\r\n            @input=\"passwordErrorMsg = []\"\r\n          />\r\n          <v-btn class=\"mb-5\" dark color=\"green\" @click=\"login\">Login</v-btn\r\n          ><br />\r\n          <span\r\n            >Are you new?<router-link to=\"/sign_up\"\r\n              >&nbsp;Sign up</router-link\r\n            ></span\r\n          >\r\n        </v-col>\r\n      </v-row>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { validationMixin } from \"vuelidate\";\r\nimport { required, email } from \"vuelidate/lib/validators\";\r\nimport authService from \"@/request/requests/authService\";\r\nimport userService from \"@/request/requests/userService\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"loginComponent\",\r\n  mixins: [validationMixin],\r\n  data: () => ({\r\n    user: {},\r\n    passwordVisible: false,\r\n    emailErrorMsg: [],\r\n    passwordErrorMsg: []\r\n  }),\r\n  validations: {\r\n    user: {\r\n      email: {\r\n        required,\r\n        email,\r\n      },\r\n      password: {\r\n        required,\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\"updateInfo\"]),\r\n    async login() {\r\n      this.$v.$touch();\r\n      if (!this.$v.user.$invalid) {\r\n        const userData = [];\r\n        userData.email = this.user.email;\r\n        userData.password = this.user.password;\r\n        const response = await authService.login({ ...userData });\r\n        console.log(response);\r\n        if(response.status == 400 && response.error.type === \"invalid email\"){\r\n          this.emailErrorMsg.push(\"Invalid email\")\r\n        }\r\n        if(response.status == 400 && response.error.type === \"invalid password\"){\r\n          this.passwordErrorMsg.push(\"Invalid password\")\r\n        }\r\n        if (response.status == 200) {\r\n          console.log(response.result._id);\r\n          const profileRes = await userService.getUserById(response.result._id);\r\n          console.log(profileRes);\r\n          this.updateInfo({\r\n            userId: profileRes.result._id,\r\n            username: profileRes.result.username,\r\n          });\r\n          console.log(this.loggedUser);\r\n          this.$router.push(\"/\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters(['loggedUser']),\r\n    emailError() {\r\n      const errors = [];\r\n      if (!this.$v.user.email.$dirty) {\r\n        return errors;\r\n      }\r\n      !this.$v.user.email.required && errors.push(\"Email is required\");\r\n      if (!this.$v.user.email.email) {\r\n        errors.push(\"Email is incorrect\");\r\n        return errors;\r\n      }\r\n      return errors;\r\n    },\r\n    passwordError() {\r\n      const errors = [];\r\n      if (!this.$v.user.password.$dirty) {\r\n        return errors;\r\n      }\r\n      if (!this.$v.user.password.required) {\r\n        errors.push(\"Password is required\");\r\n        return errors;\r\n      }\r\n      return errors;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=0a3246f6&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import requestService from '../requestService';\r\nconst prefix = '/auth';\r\n\r\nexport default {\r\n\tasync sign_up(data){\r\n\t\tconsole.log(data)\r\n\t\tconst response = await requestService.post(`${prefix}/sign_up`, data)\r\n\t\treturn response?.data\r\n\t},\r\n\tasync login(params){\r\n\t\tconst response = await requestService.post(`${prefix}/sign_in`,params)\r\n\t\treturn response?.data\r\n\t},\r\n};","import requestService from '../requestService';\r\n\r\nexport default {\r\n\tasync updateUserData(id,data){\r\n\t\tconst response = await requestService.post(`/user/update/${id}`, data)\r\n\t\treturn response?.data\r\n\t},\r\n\tasync changePassword(id,data){\r\n\t\tconst response = await requestService.post(`/user/change_password/${id}`, data)\r\n\t\treturn response?.data\r\n\t},\r\n\tasync getUserById(id){\r\n\t\tconst response = await requestService.get(`/user/${id}`)\r\n\t\treturn response?.data\r\n\t}\r\n\r\n};"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","emailError","length","emailErrorMsg","on","$event","$v","user","email","$touch","model","value","callback","$$v","$set","expression","passwordVisible","passwordError","passwordErrorMsg","password","login","staticRenderFns","name","mixins","data","validations","required","methods","mapActions","userData","authService","response","console","userService","profileRes","userId","username","computed","mapGetters","$dirty","errors","push","component","prefix","sign_up","log","requestService","params","updateUserData","id","changePassword","getUserById"],"sourceRoot":""}