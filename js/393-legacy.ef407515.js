"use strict";(self["webpackChunkcool_news"]=self["webpackChunkcool_news"]||[]).push([[393],{6454:function(t,e,r){r.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500"},model:{value:t.visibility,callback:function(e){t.visibility=e},expression:"visibility"}},[r("v-card",{staticClass:"card"},[r("v-row",{staticClass:"px-5 mt-1",attrs:{align:"center"}},[t.isEdit?r("v-card-title",[t._v("Update post")]):r("v-card-title",[t._v("Adding new post")]),r("v-spacer"),r("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.$emit("close")}}},[t._v("mdi-close")])],1),r("v-col",{staticClass:"px-8",attrs:{cols:"12",lg:"12",md:"12",xl:"12",sm:"12"}},[r("v-text-field",{attrs:{placeholder:"Type here...",label:"Post title",outlined:"",dense:"",color:"green","error-messages":t.postTitleError},on:{blur:function(e){return t.$v.posts.title.$touch()}},model:{value:t.posts.title,callback:function(e){t.$set(t.posts,"title",e)},expression:"posts.title"}}),r("v-textarea",{attrs:{placeholder:"Type here...",label:"Post text",outlined:"",dense:"",color:"green","error-messages":t.postTextError},on:{blur:function(e){return t.$v.posts.text.$touch()}},model:{value:t.posts.text,callback:function(e){t.$set(t.posts,"text",e)},expression:"posts.text"}})],1),r("v-card-actions",[r("v-row",{staticClass:"mr-2 mb-5",attrs:{justify:"end"}},[t.isEdit?r("v-row",{attrs:{justify:"end"}},[r("v-btn",{staticClass:"mr-5",attrs:{color:"red",dark:""},on:{click:function(e){return t.deletePost(t.posts._id)}}},[t._v(" Delete ")]),r("v-btn",{attrs:{color:"green",dark:""},on:{click:function(e){t.updatePost(t.posts._id),t.$emit("getPosts")}}},[t._v(" Update ")])],1):r("v-btn",{attrs:{color:"green",dark:""},on:{click:t.createNewPost}},[t._v(" Create ")])],1)],1)],1)],1)],1)},n=[],i=r(3019),o=r(6198),a=(r(5666),r(8620)),c=r(379),u=r(7868),l=r(629),d={mixins:[a.oE],data:function(){return{posts:[]}},validations:{posts:{title:{required:c.C1},text:{required:c.C1,minLength:(0,c.Ei)(50)}}},props:{visible:{require:!0},post:{require:!1},isEdit:{require:!1}},methods:{createNewPost:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.$touch(),t.$v.$invalid){e.next=12;break}return r=[],r.title=t.posts.title,r.text=t.posts.text,r.author_id=t.loggedUser.userId,r.author_username=t.loggedUser.username,e.next=9,u.Z.createPost((0,i.Z)({},r));case 9:t.posts={},t.$v.$reset(),t.$emit("createPost");case 12:case"end":return e.stop()}}),e)})))()},updatePost:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.$v.$touch(),e.$v.$invalid){r.next=10;break}return s=[],s.title=e.posts.title,s.text=e.posts.text,s.author_id=e.loggedUser.userId,s.author_username=e.loggedUser.username,r.next=9,u.Z.updatePost(t,(0,i.Z)({},s));case 9:e.$emit("getPosts");case 10:case"end":return r.stop()}}),r)})))()},deletePost:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u.Z.deletePost(t);case 2:e.$emit("getPosts");case 3:case"end":return r.stop()}}),r)})))()}},watch:{post:{deep:!0,handler:function(){this.isEdit&&(this.posts=this.post)}}},computed:(0,i.Z)((0,i.Z)({},(0,l.Se)(["loggedUser"])),{},{visibility:{get:function(){return this.visible},set:function(){this.$emit("close")}},postTitleError:function(){var t=[];return this.$v.posts.title.$dirty?(!this.$v.posts.title.required&&t.push("Title is required"),t):t},postTextError:function(){var t=[];return this.$v.posts.text.$dirty?(!this.$v.posts.text.required&&t.push("Text is required"),!this.$v.posts.text.minLength&&t.push("Tou text must contain min 50 symbols"),t):t}})},p=d,v=r(1001),f=(0,v.Z)(p,s,n,!1,null,null,null),m=f.exports},4393:function(t,e,r){r.d(e,{Z:function(){return x}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showLoader?r("div",{staticClass:"d-flex align-center"},[t.showLoader?r("v-progress-circular",{staticClass:"mx-auto",attrs:{indeterminate:"",color:"green"}}):t._e()],1):0==t.posts.length?r("div",{staticClass:"d-flex align-center"},["main"==t.type?r("span",{staticClass:"mx-auto"},[t._v("There are no posts yet")]):t._e(),"profile"==t.type?r("span",{staticClass:"mx-auto"},[t._v("You don't have any posts yet")]):t._e()]):r("v-row",{staticStyle:{justify:"space-between"}},[t._l(t.posts,(function(e){return r("v-col",{key:e._id,attrs:{cols:"6",lg:"3"}},[r("v-card",{attrs:{evalution:"10"},on:{click:function(r){return t.getDetailPost(e._id)}}},[r("v-card-title",{staticClass:"title"},[t._v(t._s(e.title))]),r("v-card-text",[r("span",{staticClass:"text"},[t._v(t._s(e.text))])]),r("v-card-subtitle",{staticClass:"px-5"},[r("v-row",{attrs:{justify:"end"}},[r("span",[t._v(" "+t._s(e.date_of_create)+" ")])]),r("v-row",{attrs:{justify:"start"}},[r("span",[t._v(" Author: "+t._s(e.author_username)+" ")])])],1)],1)],1)})),r("post-detail-modal",{attrs:{post:t.postDetail,visible:t.visibleMainModal},on:{close:function(e){t.visibleMainModal=!t.visibleMainModal}}}),r("add-new-post-modal",{attrs:{isEdit:"true",post:t.postDetail,visible:t.visibleProfileModal},on:{close:function(e){t.visibleProfileModal=!t.visibleProfileModal},getPosts:function(e){t.$emit("getPosts",t.visibleProfileModal=!1)}}})],2)],1)},n=[],i=r(6198),o=(r(5666),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"500"},model:{value:t.visibility,callback:function(e){t.visibility=e},expression:"visibility"}},[r("v-card",{staticClass:"card"},[r("v-row",{staticClass:"px-5"},[r("v-card-title",[t._v(t._s(t.post.title))]),r("v-spacer"),r("v-icon",{on:{click:function(e){return t.$emit("close")}}},[t._v("mdi-close")])],1),r("v-col",[r("v-img",{attrs:{height:"150",src:"https://cdn.vuetifyjs.com/images/cards/cooking.png"}}),r("v-card-text",[t._v(" "+t._s(t.post.text))])],1),r("v-card-subtitle",{staticClass:"px-5"},[r("v-row",{attrs:{justify:"end"}},[r("span",[t._v(" "+t._s(t.post.date_of_create)+" ")])]),r("v-row",{attrs:{justify:"start"}},[r("span",[t._v(" Author: "+t._s(t.post.author_username)+" ")])])],1)],1)],1)],1)}),a=[],c={props:{visible:{require:!0},post:{require:!0}},computed:{visibility:{get:function(){return this.visible},set:function(){this.$emit("close")}}}},u=c,l=r(1001),d=(0,l.Z)(u,o,a,!1,null,null,null),p=d.exports,v=r(6454),f=r(7868),m={components:{postDetailModal:p,addNewPostModal:v.Z},data:function(){return{visibleMainModal:!1,visibleProfileModal:!1,postDetail:{}}},props:{posts:{require:!0},type:{require:!0},showLoader:{require:!0}},methods:{getDetailPost:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f.Z.getPostById(t);case 2:s=r.sent,e.postDetail=s.result,console.log(e.postDetail),"main"===e.type&&(e.visibleMainModal=!0),"profile"===e.type&&(e.visibleProfileModal=!0);case 7:case"end":return r.stop()}}),r)})))()}}},h=m,g=(0,l.Z)(h,s,n,!1,null,null,null),x=g.exports},2222:function(t,e,r){var s=r(2109),n=r(7854),i=r(7293),o=r(3157),a=r(111),c=r(7908),u=r(6244),l=r(6135),d=r(5417),p=r(1194),v=r(5112),f=r(7392),m=v("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",x=n.TypeError,w=f>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=p("concat"),_=function(t){if(!a(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},y=!w||!b;s({target:"Array",proto:!0,forced:y},{concat:function(t){var e,r,s,n,i,o=c(this),a=d(o,0),p=0;for(e=-1,s=arguments.length;e<s;e++)if(i=-1===e?o:arguments[e],_(i)){if(n=u(i),p+n>h)throw x(g);for(r=0;r<n;r++,p++)r in i&&l(a,p,i[r])}else{if(p>=h)throw x(g);l(a,p++,i)}return a.length=p,a}})},7868:function(t,e,r){var s=r(6198),n=(r(2222),r(5666),r(4639));e["Z"]={createPost:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.Z.post("/posts/",t);case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))()},updatePost:function(t,e){return(0,s.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.Z.post("/posts/".concat(t),e);case 2:return s=r.sent,r.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return r.stop()}}),r)})))()},getAllPosts:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.Z.get("/posts/".concat(t));case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))()},getPostsByAuthor:function(t,e){return(0,s.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.Z.get("/posts/".concat(t,"/posts/").concat(e));case 2:return s=r.sent,r.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return r.stop()}}),r)})))()},getPostById:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.Z.get("/posts/post/".concat(t));case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))()},deletePost:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.Z["delete"]("/posts/".concat(t));case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))()}}}}]);
//# sourceMappingURL=393-legacy.ef407515.js.map