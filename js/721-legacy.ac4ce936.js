(self["webpackChunkcool_news"]=self["webpackChunkcool_news"]||[]).push([[721],{6773:function(e,r,s){"use strict";s.d(r,{Z:function(){return d}});var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return e.password&&!this.$v.password.valid?s("v-col",{staticClass:"mb-5"},[s("span",[e._v("The password must contain")]),s("br"),s("span",[this.$v.password.minLength?e._e():s("v-icon",{attrs:{"x-small":"",color:"error"}},[e._v("mdi-close-circle")]),this.$v.password.minLength?s("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-check-circle")]):e._e(),e._v(" Be at least 8 characters long ")],1),s("br"),s("span",[this.$v.password.validUppercase?e._e():s("v-icon",{attrs:{"x-small":"",color:"error"}},[e._v("mdi-close-circle")]),this.$v.password.validUppercase?s("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-check-circle")]):e._e(),e._v(" Have at least 1 uppercase")],1),s("br"),s("span",[this.$v.password.validLowercase?e._e():s("v-icon",{attrs:{"x-small":"",color:"error"}},[e._v("mdi-close-circle")]),this.$v.password.validLowercase?s("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-check-circle")]):e._e(),e._v(" Have at least 1 lowercase")],1),s("br"),s("span",[this.$v.password.validNumber?e._e():s("v-icon",{attrs:{"x-small":"",color:"error"}},[e._v("mdi-close-circle")]),this.$v.password.validNumber?s("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-check-circle")]):e._e(),e._v(" Have at least 1 number")],1),s("br"),s("span",[this.$v.password.validSpecial?e._e():s("v-icon",{attrs:{"x-small":"",color:"error"}},[e._v("mdi-close-circle")]),this.$v.password.validSpecial?s("v-icon",{attrs:{"x-small":"",color:"success"}},[e._v("mdi-check-circle")]):e._e(),e._v(" Have at least 1 special character (@, $, !)")],1),s("br")]):e._e()},n=[],a=(s(4916),s(7601),s(8620)),o=s(379),i={mixins:[a.oE],props:{password:{require:!1}},validations:{password:{required:o.C1,minLength:(0,o.Ei)(8),validUppercase:function(e){var r=/[A-Z]/.test(e);return r},validLowercase:function(e){var r=/[a-z]/.test(e);return r},validNumber:function(e){var r=/[0-9]/.test(e);return r},validSpecial:function(e){var r=/[#?!@$%^&*-]/.test(e);return r},valid:function(e){var r=/[A-Z]/.test(e),s=/[a-z]/.test(e),t=/[0-9]/.test(e),n=/[#?!@$%^&*-]/.test(e);return r&&s&&t&&n&&(0,o.Ei)(8)}}}},u=i,c=s(1001),l=(0,c.Z)(u,t,n,!1,null,null,null),d=l.exports},4182:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return T}});var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("profile-component")],1)},n=[],a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("v-card",[s("v-card-title",{staticClass:"ml-5"},[e._v(e._s(e.loggedUser.username))]),s("v-tabs",{attrs:{"show-arrows":"",centered:"",color:"green"},model:{value:e.tab,callback:function(r){e.tab=r},expression:"tab"}},[s("v-tabs-slider",{attrs:{color:"green"}}),s("v-tab",{attrs:{href:"#info"}},[e._v("Info")]),s("v-tab",{attrs:{href:"#posts"}},[e._v("Posts")]),s("v-tab-item",{staticClass:"mt-7",attrs:{value:"info"}},[s("user-info")],1),s("v-tab-item",{staticClass:"mt-7",attrs:{value:"posts"}},[s("user-posts")],1)],1)],1)},o=[],i=s(3019),u=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("v-col",[s("v-row",{staticClass:"px-5 mb-5",attrs:{align:"center"}},[s("v-card-title",[e._v("Your posts")]),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"green"},on:{click:function(r){e.visible=!0}}},[e._v("Add new post")])],1),s("posts-list",{staticClass:"px-10",attrs:{showLoader:e.showLoader,type:"profile",posts:e.posts},on:{getPosts:function(r){return e.getAutorPosts()}}}),e.posts.length>0?s("v-pagination",{staticClass:"mt-5",attrs:{length:e.pageCount,circle:"",color:"green"},model:{value:e.page,callback:function(r){e.page=r},expression:"page"}}):e._e()],1),s("add-new-post-modal",{attrs:{visible:e.visible},on:{close:function(r){e.visible=!e.visible},createPost:function(r){e.getAutorPosts(),e.visible=!e.visible}}})],1)},c=[],l=s(6198),d=(s(5666),s(4393)),p=s(6454),v=s(7868),m=s(629),f={components:{postsList:d.Z,AddNewPostModal:p.Z},data:function(){return{page:1,pageCount:1,visible:!1,showLoader:!0,posts:[]}},mounted:function(){this.getAutorPosts()},methods:{getAutorPosts:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.loggedUser.userId,r.next=3,v.Z.getPostsByAuthor(s,e.page);case 3:t=r.sent,e.posts=t.result,console.log(t),e.pageCount=parseInt(t.total_items/10)+1,console.log(e.pageCount),e.showLoader=!1;case 9:case"end":return r.stop()}}),r)})))()}},computed:(0,i.Z)({},(0,m.Se)(["loggedUser"])),watch:{page:{deep:!0,handler:function(){this.showLoader=!0,this.getAutorPosts()}}}},w=f,h=s(1001),g=(0,h.Z)(w,u,c,!1,null,null,null),x=g.exports,_=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{"align-self":"center",cols:"6",lg:"6"}},[s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Username","error-messages":e.usernameError},on:{blur:function(r){return e.$v.user.username.$touch()}},model:{value:e.user.username,callback:function(r){e.$set(e.user,"username",r)},expression:"user.username"}}),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"First name","error-messages":e.firstNameError},on:{blur:function(r){return e.$v.user.first_name.$touch()}},model:{value:e.user.first_name,callback:function(r){e.$set(e.user,"first_name",r)},expression:"user.first_name"}}),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Last name","error-messages":e.lastNameError},on:{blur:function(r){return e.$v.user.last_name.$touch()}},model:{value:e.user.last_name,callback:function(r){e.$set(e.user,"last_name",r)},expression:"user.last_name"}}),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Email",autocomplete:"email","error-messages":e.emailError},on:{blur:function(r){return e.$v.user.email.$touch()}},model:{value:e.user.email,callback:function(r){e.$set(e.user,"email",r)},expression:"user.email"}}),s("v-btn",{attrs:{dark:"",color:"green"},on:{click:e.updateUserInfo}},[e._v("Update")]),s("v-card-title",[s("h3",[e._v("Change password")])]),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Current password",type:e.currentPasswordVisible?"text":"password","append-icon":e.currentPasswordVisible?"mdi-eye":"mdi-eye-off","error-messages":e.currentPasswordError},on:{"click:append":function(r){e.currentPasswordVisible=!e.currentPasswordVisible},blur:function(r){return e.$v.password.current_password.$touch()}},model:{value:e.password.current_password,callback:function(r){e.$set(e.password,"current_password",r)},expression:"password.current_password"}}),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"New password",type:e.passwordVisible?"text":"password","append-icon":e.passwordVisible?"mdi-eye":"mdi-eye-off","error-messages":e.passwordError,"hide-details":""!==e.password.password&&e.password.password.length<8},on:{"click:append":function(r){e.passwordVisible=!e.passwordVisible},blur:function(r){return e.$v.password.password.$touch()}},model:{value:e.password.password,callback:function(r){e.$set(e.password,"password",r)},expression:"password.password"}}),s("password-helper",{attrs:{password:e.password.password}}),s("v-text-field",{attrs:{color:"green",dense:"",outlined:"",placeholder:"Type here...",label:"Confirm password",type:e.confirmPasswordVisible?"text":"password","append-icon":e.confirmPasswordVisible?"mdi-eye":"mdi-eye-off","error-messages":e.confirmPasswordError},on:{"click:append":function(r){e.confirmPasswordVisible=!e.confirmPasswordVisible},blur:function(r){return e.$v.password.confirm_password.$touch()}},model:{value:e.password.confirm_password,callback:function(r){e.$set(e.password,"confirm_password",r)},expression:"password.confirm_password"}}),s("v-btn",{staticClass:"mb-5",attrs:{dark:"",color:"green"},on:{click:e.updateUserPassword}},[e._v("Update")])],1)],1)],1)},b=[],$=s(8620),E=s(379),y=s(6773),k=s(5397),I={components:{passwordHelper:y.Z},mixins:[$.oE],data:function(){return{user:{},password:{password:""},currentPasswordVisible:!1,passwordVisible:!1,confirmPasswordVisible:!1}},validations:{user:{email:{required:E.C1,email:E.Do},first_name:{required:E.C1},last_name:{required:E.C1},username:{required:E.C1}},password:{current_password:{required:E.C1},password:{required:E.C1},confirm_password:{required:E.C1,sameAsPassword:(0,E.sH)("password")}}},mounted:function(){this.getUserInfo()},methods:(0,i.Z)((0,i.Z)({},(0,m.nv)(["updateInfo"])),{},{getUserInfo:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e.loggedUser.userId,r.next=3,k.Z.getUserById(s);case 3:t=r.sent,e.user=t.result,e.updateInfo({userId:t.result._id,username:t.result.username});case 6:case"end":return r.stop()}}),r)})))()},updateUserInfo:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.$v.user.$touch(),e.$v.user.$invalid){r.next=11;break}return s=e.loggedUser.userId,t=[],t.username=e.user.username,t.first_name=e.user.first_name,t.last_name=e.user.last_name,t.email=e.user.email,r.next=10,k.Z.updateUserData(s,(0,i.Z)({},t));case 10:e.getUserInfo();case 11:case"end":return r.stop()}}),r)})))()},updateUserPassword:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.$v.password.$touch(),e.$v.password.$invalid){r.next=8;break}return s=e.loggedUser.userId,t=[],t.current_password=e.password.current_password,t.password=e.password.password,r.next=8,k.Z.changePassword(s,(0,i.Z)({},t));case 8:case"end":return r.stop()}}),r)})))()}}),computed:(0,i.Z)((0,i.Z)({},(0,m.Se)(["loggedUser"])),{},{emailError:function(){var e=[];return this.$v.user.email.$dirty?(!this.$v.user.email.required&&e.push("Email is required"),this.$v.user.email.email||e.push("Email is incorrect"),e):e},firstNameError:function(){var e=[];return this.$v.user.first_name.$dirty?(this.$v.user.first_name.required||e.push("First name is required"),e):e},lastNameError:function(){var e=[];return this.$v.user.last_name.$dirty?(this.$v.user.last_name.required||e.push("Last name is required"),e):e},usernameError:function(){var e=[];return this.$v.user.username.$dirty?(this.$v.user.username.required||e.push("Username is required"),e):e},currentPasswordError:function(){var e=[];return this.$v.password.current_password.$dirty?(this.$v.password.current_password.required||e.push("Current password is required"),e):e},passwordError:function(){var e=[];return this.$v.password.password.$dirty?(this.$v.password.password.required||e.push("Password is required"),e):e},confirmPasswordError:function(){var e=[];return this.$v.password.confirm_password.$dirty?this.$v.password.confirm_password.sameAsPassword||""===this.password.password?(!this.$v.password.confirm_password.required&&e.push("Confirm password is required"),e):(e.push("Password don`t match"),e):e}})},P=I,Z=(0,h.Z)(P,_,b,!1,null,null,null),C=Z.exports,R={components:{userPosts:x,userInfo:C},data:function(){return{tab:""}},computed:(0,i.Z)({},(0,m.Se)(["loggedUser"]))},U=R,q=(0,h.Z)(U,a,o,!1,null,null,null),A=q.exports,V={name:"profile-view",components:{profileComponent:A}},L=V,N=(0,h.Z)(L,t,n,!1,null,null,null),T=N.exports},2261:function(e,r,s){"use strict";var t=s(6916),n=s(1702),a=s(1340),o=s(7066),i=s(2999),u=s(2309),c=s(30),l=s(9909).get,d=s(9441),p=s(7168),v=u("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,f=m,w=n("".charAt),h=n("".indexOf),g=n("".replace),x=n("".slice),_=function(){var e=/a/,r=/b*/g;return t(m,e,"a"),t(m,r,"a"),0!==e.lastIndex||0!==r.lastIndex}(),b=i.BROKEN_CARET,$=void 0!==/()??/.exec("")[1],E=_||$||b||d||p;E&&(f=function(e){var r,s,n,i,u,d,p,E=this,y=l(E),k=a(e),I=y.raw;if(I)return I.lastIndex=E.lastIndex,r=t(f,I,k),E.lastIndex=I.lastIndex,r;var P=y.groups,Z=b&&E.sticky,C=t(o,E),R=E.source,U=0,q=k;if(Z&&(C=g(C,"y",""),-1===h(C,"g")&&(C+="g"),q=x(k,E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&"\n"!==w(k,E.lastIndex-1))&&(R="(?: "+R+")",q=" "+q,U++),s=new RegExp("^(?:"+R+")",C)),$&&(s=new RegExp("^"+R+"$(?!\\s)",C)),_&&(n=E.lastIndex),i=t(m,Z?s:E,q),Z?i?(i.input=x(i.input,U),i[0]=x(i[0],U),i.index=E.lastIndex,E.lastIndex+=i[0].length):E.lastIndex=0:_&&i&&(E.lastIndex=E.global?i.index+i[0].length:n),$&&i&&i.length>1&&t(v,i[0],s,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i&&P)for(i.groups=d=c(null),u=0;u<P.length;u++)p=P[u],d[p[0]]=i[p[1]];return i}),e.exports=f},7066:function(e,r,s){"use strict";var t=s(9670);e.exports=function(){var e=t(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}},2999:function(e,r,s){var t=s(7293),n=s(7854),a=n.RegExp,o=t((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),i=o||t((function(){return!a("a","y").sticky})),u=o||t((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:u,MISSED_STICKY:i,UNSUPPORTED_Y:o}},9441:function(e,r,s){var t=s(7293),n=s(7854),a=n.RegExp;e.exports=t((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,r,s){var t=s(7293),n=s(7854),a=n.RegExp;e.exports=t((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4916:function(e,r,s){"use strict";var t=s(2109),n=s(2261);t({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},7601:function(e,r,s){"use strict";s(4916);var t=s(2109),n=s(7854),a=s(6916),o=s(1702),i=s(614),u=s(111),c=function(){var e=!1,r=/[ac]/;return r.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&e}(),l=n.Error,d=o(/./.test);t({target:"RegExp",proto:!0,forced:!c},{test:function(e){var r=this.exec;if(!i(r))return d(this,e);var s=a(r,this,e);if(null!==s&&!u(s))throw new l("RegExp exec method returned something other than an Object or null");return!!s}})},5397:function(e,r,s){"use strict";var t=s(6198),n=(s(5666),s(4639));r["Z"]={updateUserData:function(e,r){return(0,t.Z)(regeneratorRuntime.mark((function s(){var t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,n.Z.post("/user/update/".concat(e),r);case 2:return t=s.sent,s.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return s.stop()}}),s)})))()},changePassword:function(e,r){return(0,t.Z)(regeneratorRuntime.mark((function s(){var t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,n.Z.post("/user/change_password/".concat(e),r);case 2:return t=s.sent,s.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return s.stop()}}),s)})))()},getUserById:function(e){return(0,t.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.Z.get("/user/".concat(e));case 2:return s=r.sent,r.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return r.stop()}}),r)})))()}}}}]);
//# sourceMappingURL=721-legacy.ac4ce936.js.map